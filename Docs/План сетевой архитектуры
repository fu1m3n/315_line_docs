# Сценарий управления линией через сервер

## Общая архитектура

### Станции с ПЛК (Festo FEC FC640)
- Каждую станцию соединить с центральным Ethernet-коммутатором.
- Так как поддерживается TCP/IP-стек, это позволяет использовать стандартные промышленные протоколы (например, OPC UA/DA). В нашем случае мы можем использовать OPC Server for EasyIP, который будет совместим с протоколом Festo EasyIP.

### Сервер управления (SCADA/пользовательское ПО)
- Должен быть подключён к той же сети.
- Работает как мастер.
- Взаимодействует с контроллерами напрямую или через промежуточные OPC-серверы. Выше был приведён в пример OPC DA сервер, который совместим с системой MasterSCADA, соответственно не понадобятся никакие промежуточные интерфейсы для использования этой SCADA-системы. По этой ссылке можно посмотреть способы подключения SCADA-системы по OPC DA: https://masterscada.ru/faq/opc-da-ne-rabotaet-na-vneshnem-rt

### SCADA-система (например, Master SCADA)
- Получает данные от контроллеров.
- Визуализирует данные, позволяет оператору управлять процессом.

## План подключения контроллеров и SCADA-сети

### Шаг 1: Сеть
- Объединить все Festo FEC FC640 в локальную Ethernet-сеть, используя EasyIP.
- Назначить каждому контроллеру статический IP-адрес.
- Подключить сервер и SCADA-компьютер к этой же сети.

### Шаг 2: Программное обеспечение
- Установить OPC-DA сервер на сервер управления.
- Настроить точки доступа к данным ПЛК на этом сервере.
- Настроить Master SCADA как OPC DA клиент — указать IP OPC DA-сервера.

### Шаг 3: SCADA
- В Master SCADA создать каналы и теги.
- Настроить визуализацию.

# Замена ПЛК

Festo FEC FC640 — не самый популярный ПЛК на рынке. Он ограничен:
- Низкой гибкостью по промышленным протоколам.
- Ограниченной производительностью (по сравнению с Siemens, Beckhoff и т.п.).
- Ограниченной экосистемой ПО и интеграцией со SCADA.

## Siemens S7-1200
Модульный контроллер, широко используемый в промышленной автоматике. Имеет мощную среду разработки (TIA Portal), отличную поддержку протоколов и совместимость с большинством SCADA-систем.

Когда выгоден:
- Когда нужно повысить совместимость с другим оборудованием.
- При необходимости централизованной SCADA-системы на OPC UA без промежуточного ПО.
- Когда важна стандартизация и надежность.

## WAGO 750-8212 (или 750-8101)
Модульные контроллеры, программируются в CoDeSys, поддерживают OPC UA и Modbus TCP.

Когда выгоден:
- Когда проект учебный, и нет смысла в промышленном уровне Siemens или Beckhoff.
- Когда нужно быстрое и простое подключение к SCADA через встроенный OPC UA, без сторонних OPC-серверов.
- Когда установка компактная или требует простой модульной сборки, и удобна универсальность ввода/вывода WAGO.
- Когда станция используется как демонстрационная или лабораторная, и важны наглядные веб-интерфейсы, диагностика и лёгкость обновления.

## Сравнительная таблица

| Критерий                | Siemens S7-1200                          | WAGO 750-8212                          | Festo FEC FC640                  |
|-------------------------|------------------------------------------|----------------------------------------|----------------------------------|
| Среда разработки        | TIA Portal — графическая, мощная, с симуляцией | CoDeSys (ST, LD, FBD)                 | CoDeSys (ST, LD, FBD)           |
| Протоколы связи         | OPC UA, Modbus TCP, S7, Profinet, MQTT  | OPC UA (встроенный), Modbus TCP, Ethernet/IP | TCP/IP                   |
| Интеграция со SCADA     | Прямая через встроенный OPC UA          | Прямая через OPC UA                   | OPC DA                          |
| Масштабируемость        | Простое добавление модулей I/O и CPU    | Модульные I/O                         | Требуются Festo-модули (Менее гибкая) |
| Скорость и производительность | Высокая                            | Средняя                               | Средняя                         |
